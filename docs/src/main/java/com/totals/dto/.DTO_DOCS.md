# DTO Map Documentatie - BA Totalisatie Spring Boot Applicatie

## Overzicht van de DTO Map

De `dto/` map bevat alle Data Transfer Objects voor de BA Totalisatie Spring Boot applicatie. Deze DTO's worden gebruikt voor de communicatie tussen de frontend en backend, en voor het structureren van API responses en requests.

**Locatie**: `src/main/java/com/totals/dto/`

**Aantal bestanden**: 5 bestanden

---

## Folder Structuur

```
dto/
├── BaCalculationResponse.java    # Response voor BA berekeningen
├── BaErrorResponse.java         # Error response structuur
├── BaLogEntry.java             # Individuele log entry
├── BaLogsResponse.java         # Response voor log ophalen
├── BaTotalsResponse.java       # Response voor totalen
└── .DTO_DOCS.md               # Deze documentatie
```

## Bestanden in de DTO Map

### 1. BaCalculationResponse.java

**Doel**: Response DTO voor BA berekening operaties met gedetailleerde resultaten.

**Package**: `com.totals.dto`

**Type**: Java Record (immutable data class)

**Attributen**:
| Naam | Type | Beschrijving |
|------|------|--------------|
| `message` | `String` | Beschrijvende boodschap over de berekening |
| `kenmerk` | `String` | Unieke identifier voor de berekening |
| `bijdragePercentage` | `Integer` | Het percentage dat gebruikt werd voor de berekening |
| `totalen` | `List<Double>` | Lijst met alle berekende totalen |
| `durationMs` | `long` | Duur van de berekening in milliseconden |

**Methoden**:
- `public static BaCalculationResponse success(String kenmerk, Integer bijdragePercentage, List<Double> totalen, long durationMs)` - Factory method voor succesvolle berekeningen

**Gebruik**: Wordt gebruikt door `BaController` om berekening resultaten terug te sturen naar de frontend.

**Dependencies**: 
- `java.util.List` - Voor de totalen lijst

### 2. BaErrorResponse.java

**Doel**: Gestandaardiseerde error response structuur voor alle API fouten.

**Package**: `com.totals.dto`

**Type**: Java Record (immutable data class)

**Attributen**:
| Naam | Type | Beschrijving |
|------|------|--------------|
| `timestamp` | `LocalDateTime` | Tijdstip waarop de fout optrad |
| `status` | `int` | HTTP status code (400, 404, 500, etc.) |
| `error` | `String` | Type fout (Bad Request, Not Found, etc.) |
| `message` | `String` | Beschrijvende foutmelding |
| `path` | `String` | API endpoint waar de fout optrad |

**Methoden**:
- `public static BaErrorResponse of(int status, String error, String message, String path)` - Factory method die automatisch de huidige timestamp toevoegt

**Gebruik**: Wordt gebruikt door `GlobalExceptionHandler` voor consistente error responses.

**Dependencies**:
- `java.time.LocalDateTime` - Voor timestamp functionaliteit

### 3. BaLogEntry.java

**Doel**: Representatie van een individuele log entry.

**Package**: `com.totals.dto`

**Type**: Java Record (immutable data class)

**Attributen**:
| Naam | Type | Beschrijving |
|------|------|--------------|
| `timestamp` | `String` | Tijdstip van de log entry (als string) |
| `level` | `String` | Log level (INFO, WARN, ERROR, DEBUG) |
| `message` | `String` | Log bericht |
| `kenmerk` | `String` | Unieke identifier gerelateerd aan de log |

**Gebruik**: Wordt gebruikt in `BaLogsResponse` om individuele log entries te representeren.

**Dependencies**: Geen externe dependencies

### 4. BaLogsResponse.java

**Doel**: Response DTO voor het ophalen van log entries.

**Package**: `com.totals.dto`

**Type**: Java Record (immutable data class)

**Attributen**:
| Naam | Type | Beschrijving |
|------|------|--------------|
| `kenmerk` | `String` | Unieke identifier voor de log sessie |
| `logEntries` | `List<BaLogEntry>` | Lijst van alle log entries |

**Methoden**:
- `public static BaLogsResponse success(String kenmerk, List<BaLogEntry> logEntries)` - Factory method voor succesvolle log responses

**Gebruik**: Wordt gebruikt door `LogsController` om log data terug te sturen.

**Dependencies**:
- `java.util.List` - Voor de log entries lijst
- `BaLogEntry` - Voor individuele log entries

### 5. BaTotalsResponse.java

**Doel**: Response DTO voor het ophalen van berekende totalen.

**Package**: `com.totals.dto`

**Type**: Java Record (immutable data class)

**Attributen**:
| Naam | Type | Beschrijving |
|------|------|--------------|
| `kenmerk` | `String` | Unieke identifier voor de totalen |
| `totaal1` | `Double` | Eerste totaal waarde |
| `totaal2` | `Double` | Tweede totaal waarde |
| `totaal3` | `Double` | Derde totaal waarde |
| `totaal4` | `Double` | Vierde totaal waarde |
| `totaal5` | `Double` | Vijfde totaal waarde |
| `totaal6` | `Double` | Zesde totaal waarde |
| `recordCount` | `Long` | Aantal records dat gebruikt werd voor de berekening |

**Gebruik**: Wordt gebruikt door `BaController` om totaal resultaten terug te sturen.

**Dependencies**: Geen externe dependencies

## Design Patterns

### 1. Record Pattern
Alle DTO's gebruiken Java Records voor:
- Immutability (onveranderlijkheid)
- Compacte syntax
- Automatische equals(), hashCode() en toString() implementaties
- Constructor en getter methods

### 2. Factory Method Pattern
Verschillende DTO's hebben static factory methods:
- `BaCalculationResponse.success()` - Voor succesvolle berekeningen
- `BaLogsResponse.success()` - Voor succesvolle log responses
- `BaErrorResponse.of()` - Voor error responses

### 3. Builder Pattern (Impliciet)
Door de record syntax en factory methods wordt een soort builder pattern geïmplementeerd voor het maken van complexe DTO's.

## Data Flow

1. **Request Flow**: Frontend → Controller → Service → Repository → Database
2. **Response Flow**: Database → Repository → Service → Controller → DTO → Frontend

## Validatie

De DTO's zelf bevatten geen validatie annotaties, maar de validatie gebeurt op controller niveau voordat de DTO's worden aangemaakt. Dit zorgt voor:
- Schone DTO's zonder business logic
- Centrale validatie in controllers
- Betere scheiding van concerns

## Serialisatie

Alle DTO's zijn automatisch serialiseerbaar naar JSON door:
- Jackson (Spring Boot default)
- Record syntax die Jackson ondersteunt
- Geen custom serialisatie nodig

## Performance Overwegingen

- **Immutability**: Voorkomt onbedoelde wijzigingen
- **Memory efficiency**: Records zijn efficiënter dan classes
- **JSON serialisatie**: Snelle conversie naar/van JSON
- **Garbage collection**: Minder objecten door immutability

## Uitbreidingsmogelijkheden

Voor toekomstige uitbreidingen kunnen de volgende DTO's worden toegevoegd:
- `BaRequestDto` - Voor input validatie
- `BaValidationResponse` - Voor validatie resultaten
- `BaStatisticsResponse` - Voor statistieken en metrics
- `BaBatchResponse` - Voor batch operaties

## Best Practices

1. **Immutability**: Alle DTO's zijn immutable
2. **Factory methods**: Voor complexe constructie
3. **Consistente naming**: Alle DTO's eindigen op "Response" of "Entry"
4. **Minimale dependencies**: Alleen noodzakelijke imports
5. **Documentatie**: Duidelijke JavaDoc voor complexe DTO's
