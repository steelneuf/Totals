# ===========================================
# DATABASE CONFIGURATIE
# ===========================================
# Database configuratie wordt geladen vanuit environment variabelen

# Database verbinding
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/ba_totals_db}
spring.datasource.username=${DB_USERNAME:ba_user}
spring.datasource.password=${DB_PASSWORD:ba_pass}

# ===========================================
# CONNECTION POOL CONFIGURATIE
# ===========================================
# Database connection pool size:
# maximum-pool-size=1  = single connection (matcht single-threaded)
# maximum-pool-size=10 = multiple connections (voor multi-threaded)
spring.datasource.hikari.maximum-pool-size=1
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# ===========================================
# TOMCAT THREAD CONFIGURATIE
# ===========================================
# Threading mode:
# max=1  = single-threaded (standaard, voorspelbaar, eenvoudig)
# max=20 = multi-threaded (betere performance, hogere throughput)
server.tomcat.threads.max=1
server.tomcat.threads.min-spare=1

# ===========================================
# JPA/HIBERNATE CONFIGURATIE
# ===========================================
# Schema validatie (geen wijzigingen)
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.open-in-view=false

# PostgreSQL-specifieke Hibernate performance settings
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true


# ===========================================
# LOGGING CONFIGURATIE
# ===========================================
# Log path (configureerbaar via environment variable)
logging.path=${LOG_PATH:./logs}
logging.level.root=${LOG_LEVEL:INFO}

# Log file configuratie
logging.file.application.max-size=${LOG_APP_MAX_SIZE:10MB}
logging.file.application.max-history=${LOG_APP_MAX_HISTORY:30}

# ===========================================
# API CONFIGURATIE
# ===========================================
# API Versioning
api.version=v1

# ===========================================
# CALCULATION LOG CONFIGURATIE
# ===========================================
# Calculation log configuratie
logging.calculation.filename=ba-calc.log

# ===========================================
# OPENAPI/SWAGGER CONFIGURATIE
# ===========================================
# OpenAPI documentatie configuratie
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.tryItOutEnabled=true

